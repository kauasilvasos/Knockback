<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hub de Pesquisa: Mec√¢nicas Teeworlds/DDNet</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Custom Font Import */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF7; /* Warm Off-White */
            color: #2D3748; /* Dark Grey */
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e0; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #a0aec0; 
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 100%;
            height: 350px;
            margin: 0 auto;
        }

        /* Tab Transition */
        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }
        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Card Hover Effect */
        .feature-card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .feature-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        /* Kanban Column */
        .kanban-col {
            min-height: 200px;
        }
    </style>
    <!-- Chosen Palette: Warm Neutrals & Technical Blue -->
    <!-- Background: #FDFBF7 (Cream/Paper) -->
    <!-- Primary Text: #2D3748 (Slate 800) -->
    <!-- Accents: #4A5568 (Slate 600), #E2E8F0 (Slate 200) -->
    <!-- Interactive: #3182CE (Blue 600 for actions), #ED8936 (Orange 400 for highlights) -->

    <!-- Application Structure Plan: 
         1. Dashboard Layout: A sidebar navigation (desktop) / top nav (mobile) splitting the content into 4 logical modules based on the report's checklist.
         2. Modules:
            - F√≠sica Core (Points 1, 2, 5): Interactive math simulation of friction/gravity.
            - Sistemas de Jogador (Points 3, 4): Interactive Input Wizard demo and State visualization.
            - IA & Game Feel (Points 6, 7): Comparative analysis of AI methods.
            - Roadmap do Projeto (Points 8, 9, 10): Kanban board for project tracking.
         3. Rationale: The source text is a technical research list. Transforming it into a "Research Lab" dashboard allows the user to simulate the mechanics (Point 1/2) rather than just reading about them, and track progress (Points 9/10) visually.
    -->

    <!-- Visualization & Content Choices:
         - Line Chart (Chart.js): Visualizes physics friction/decay (Point 1). Goal: Inform & Change. Interaction: Sliders to adjust friction coefficient.
         - Radar Chart (Chart.js): Compares AI approaches (NEAT vs RL) (Point 7). Goal: Compare.
         - Interactive Wizard (HTML/JS): Demonstrates the "Wizard style" input mapping (Point 4). Goal: Organize/Task.
         - Kanban Board (HTML/JS): Organizes the project tasks (Points 8-10). Goal: Organize.
         - Logic Diagram (HTML/CSS): Visualizes Hook mechanics using CSS shapes (Point 2).
         - CONFIRMATION: NO SVG graphics used. NO Mermaid JS used.
    -->
</head>
<body class="h-screen flex flex-col md:flex-row overflow-hidden">

    <!-- Sidebar Navigation -->
    <nav class="bg-white w-full md:w-64 border-r border-gray-200 flex flex-col shadow-sm z-10 flex-shrink-0">
        <div class="p-6 border-b border-gray-100 bg-gray-50">
            <h1 class="text-xl font-bold text-slate-800 tracking-tight">TW/DDNet<br><span class="text-blue-600">Research Hub</span></h1>
            <p class="text-xs text-slate-500 mt-2">Painel de An√°lise de C√≥digo & Mec√¢nicas</p>
        </div>
        <div class="flex-1 overflow-y-auto p-4 space-y-2">
            <button onclick="switchTab('physics')" class="nav-btn w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-colors bg-blue-50 text-blue-700" id="btn-physics">
                ‚ûó F√≠sica & Matem√°tica
            </button>
            <button onclick="switchTab('systems')" class="nav-btn w-full text-left px-4 py-3 rounded-lg text-sm font-medium text-slate-600 hover:bg-gray-50 transition-colors" id="btn-systems">
                üéÆ Inputs & Estados
            </button>
            <button onclick="switchTab('ai')" class="nav-btn w-full text-left px-4 py-3 rounded-lg text-sm font-medium text-slate-600 hover:bg-gray-50 transition-colors" id="btn-ai">
                üß† IA & Game Feel
            </button>
            <button onclick="switchTab('roadmap')" class="nav-btn w-full text-left px-4 py-3 rounded-lg text-sm font-medium text-slate-600 hover:bg-gray-50 transition-colors" id="btn-roadmap">
                üìÖ Roadmap & Organiza√ß√£o
            </button>
        </div>
        <div class="p-4 border-t border-gray-100">
            <div class="bg-blue-600 rounded-lg p-3 text-white text-xs">
                <p class="font-bold mb-1">Status Atual</p>
                <p>Fase: <span class="opacity-90">An√°lise de C√≥digo</span></p>
                <p>Prioridade: <span class="opacity-90">Offline Gameplay</span></p>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="flex-1 overflow-y-auto bg-[#FDFBF7] p-4 md:p-8 relative">
        
        <!-- SECTION 1: PHYSICS CORE -->
        <section id="physics" class="tab-content active max-w-5xl mx-auto">
            <header class="mb-8">
                <h2 class="text-3xl font-bold text-slate-800 mb-3">Motor de F√≠sica e Matem√°tica</h2>
                <p class="text-slate-600 leading-relaxed max-w-3xl">
                    Esta se√ß√£o foca na an√°lise das classes <code>CCharacter</code> e <code>CGameWorld</code>. O objetivo √© compreender como vetores de velocidade, atrito e gravidade interagem para criar a movimenta√ß√£o fluida caracter√≠stica do Teeworlds. Use o simulador abaixo para visualizar o decaimento de velocidade e o impacto dos coeficientes de atrito.
                </p>
            </header>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                <!-- Simulation Controls -->
                <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm">
                    <h3 class="font-semibold text-lg mb-4 text-slate-700">Par√¢metros de Simula√ß√£o</h3>
                    <div class="space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-slate-600 mb-2">Velocidade Inicial (v0)</label>
                            <input type="range" id="initVelocity" min="10" max="100" value="50" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600">
                            <span id="valVelocity" class="text-xs text-blue-600 font-bold float-right">50</span>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-600 mb-2">Atrito do Solo (Friction)</label>
                            <input type="range" id="friction" min="0" max="0.9" step="0.05" value="0.1" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-orange-500">
                            <span id="valFriction" class="text-xs text-orange-500 font-bold float-right">0.1</span>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-600 mb-2">Resist√™ncia do Ar (Drag)</label>
                            <input type="range" id="drag" min="0" max="0.5" step="0.01" value="0.05" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-teal-500">
                            <span id="valDrag" class="text-xs text-teal-500 font-bold float-right">0.05</span>
                        </div>
                    </div>
                    <div class="mt-6 p-4 bg-gray-50 rounded text-xs text-slate-500">
                        <p><strong>F√≥rmula Simplificada:</strong><br>V(t+1) = V(t) * (1 - atrito)</p>
                    </div>
                </div>

                <!-- Physics Chart -->
                <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm lg:col-span-2 flex flex-col">
                    <h3 class="font-semibold text-lg mb-2 text-slate-700">Decaimento de Velocidade & Momento</h3>
                    <div class="chart-container flex-grow">
                        <canvas id="physicsChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Mechanics Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm feature-card">
                    <div class="flex items-center mb-4">
                        <div class="w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 text-xl mr-3">ü™ù</div>
                        <h3 class="font-bold text-slate-800">F√≠sica do Grappling Hook</h3>
                    </div>
                    <p class="text-sm text-slate-600 mb-4">Investiga√ß√£o da l√≥gica de p√™ndulo e restri√ß√µes de dist√¢ncia. O hook aplica uma for√ßa tangente ao arco de movimento, modificando o vetor de velocidade sem violar a conserva√ß√£o de energia.</p>
                    <div class="h-24 bg-slate-50 rounded border border-slate-100 flex items-center justify-center relative overflow-hidden">
                        <!-- CSS Representation of Hook Logic -->
                        <div class="absolute top-0 left-1/2 w-0.5 h-12 bg-indigo-400 origin-top transform -rotate-12"></div>
                        <div class="absolute top-12 left-[48%] w-3 h-3 bg-indigo-600 rounded-full"></div>
                        <div class="text-[10px] text-slate-400 absolute bottom-2">Restri√ß√£o de Dist√¢ncia (L)</div>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm feature-card">
                    <div class="flex items-center mb-4">
                        <div class="w-10 h-10 rounded-full bg-red-100 flex items-center justify-center text-red-600 text-xl mr-3">üí•</div>
                        <h3 class="font-bold text-slate-800">Knockback & Momento</h3>
                    </div>
                    <p class="text-sm text-slate-600 mb-4">C√°lculo de impacto de armas (Rocket/Hammer). A velocidade relativa entre o proj√©til e o alvo define a magnitude do vetor de for√ßa resultante.</p>
                    <ul class="text-xs text-slate-500 space-y-2 mt-2">
                        <li class="flex items-center">üîπ Conserva√ß√£o de Momento Linear</li>
                        <li class="flex items-center">üîπ Soma vetorial: V_final = V_inicial + (For√ßa / Massa)</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- SECTION 2: SYSTEMS & INPUT -->
        <section id="systems" class="tab-content max-w-5xl mx-auto">
            <header class="mb-8">
                <h2 class="text-3xl font-bold text-slate-800 mb-3">Sistemas de Input & Estados</h2>
                <p class="text-slate-600 leading-relaxed max-w-3xl">
                    Implementa√ß√£o de padr√µes de design para remapeamento din√¢mico ("Wizard Style") e gerenciamento de estados complexos de jogador como "Freeze" e controle de entidade dupla ("Dummy").
                </p>
            </header>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Input Wizard Demo -->
                <div class="bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden">
                    <div class="bg-slate-800 p-4 flex justify-between items-center">
                        <h3 class="text-white font-semibold">Configura√ß√£o Inicial (Wizard Demo)</h3>
                        <span class="text-xs bg-blue-500 text-white px-2 py-1 rounded">Passo <span id="wizardStepNum">1</span>/3</span>
                    </div>
                    
                    <div class="p-8 flex flex-col items-center justify-center min-h-[300px]" id="wizardContent">
                        <!-- Dynamic Content injected by JS -->
                    </div>

                    <div class="p-4 bg-gray-50 border-t border-gray-100 flex justify-between">
                        <button onclick="wizardPrev()" class="px-4 py-2 text-sm text-slate-600 hover:text-slate-900 disabled:opacity-50" id="btnPrev" disabled>Voltar</button>
                        <button onclick="wizardNext()" class="px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm font-medium transition-colors" id="btnNext">Pr√≥ximo</button>
                    </div>
                </div>

                <!-- Player States Logic -->
                <div class="space-y-6">
                    <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm">
                        <h3 class="font-bold text-slate-800 mb-3 border-b pb-2">Estado: Freeze</h3>
                        <p class="text-sm text-slate-600 mb-3">Bloqueio total de inputs de movimento e altera√ß√£o da layer de colis√£o.</p>
                        <div class="flex space-x-2">
                            <span class="px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded border border-gray-200">Input: Blocked</span>
                            <span class="px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded border border-blue-200">Colis√£o: Est√°tica</span>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm">
                        <h3 class="font-bold text-slate-800 mb-3 border-b pb-2">Mec√¢nica: Dummy (Entidade Dupla)</h3>
                        <p class="text-sm text-slate-600 mb-3">Gerenciamento de duas inst√¢ncias de <code>CCharacter</code> control√°veis.</p>
                        <div class="space-y-2">
                            <div class="flex items-center justify-between text-xs bg-green-50 p-2 rounded border border-green-100">
                                <span class="font-semibold text-green-800">C√≥pia de Input</span>
                                <span class="text-green-600">Inputs do Jogador ‚Üí Dummy</span>
                            </div>
                            <div class="flex items-center justify-between text-xs bg-orange-50 p-2 rounded border border-orange-100">
                                <span class="font-semibold text-orange-800">Troca de Contexto</span>
                                <span class="text-orange-600">Foco de C√¢mera & Controle</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 3: AI & GAME FEEL -->
        <section id="ai" class="tab-content max-w-5xl mx-auto">
            <header class="mb-8">
                <h2 class="text-3xl font-bold text-slate-800 mb-3">Intelig√™ncia Artificial & Game Feel</h2>
                <p class="text-slate-600 leading-relaxed max-w-3xl">
                    Compara√ß√£o de m√©todos de IA para agentes aut√¥nomos e t√©cnicas de "Juice" para feedback visual. O foco est√° em agentes que aprendem a se mover com efici√™ncia usando Aprendizado por Refor√ßo.
                </p>
            </header>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- AI Comparison Chart -->
                <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm lg:col-span-2">
                    <h3 class="font-semibold text-lg mb-4 text-slate-700">Compara√ß√£o de Modelos de IA</h3>
                    <div class="chart-container">
                        <canvas id="aiChart"></canvas>
                    </div>
                </div>

                <!-- Game Feel Checklist -->
                <div class="space-y-4">
                    <div class="bg-gradient-to-br from-yellow-50 to-orange-50 p-6 rounded-xl border border-orange-100 shadow-sm">
                        <h3 class="font-bold text-orange-800 mb-2">Game Feel ("Juice")</h3>
                        <p class="text-xs text-orange-700 mb-4">Baseado em Vlambeer.</p>
                        <ul class="space-y-3">
                            <li class="flex items-start">
                                <div class="mt-1 w-4 h-4 rounded bg-orange-200 flex items-center justify-center text-[10px] mr-2">üîä</div>
                                <span class="text-sm text-slate-700"><strong>Design de Som:</strong> Feedback auditivo imediato para conquistas e impactos.</span>
                            </li>
                            <li class="flex items-start">
                                <div class="mt-1 w-4 h-4 rounded bg-orange-200 flex items-center justify-center text-[10px] mr-2">‚ú®</div>
                                <span class="text-sm text-slate-700"><strong>Feedback Visual:</strong> Screen shake, part√≠culas e freeze-frames curtos no impacto.</span>
                            </li>
                            <li class="flex items-start">
                                <div class="mt-1 w-4 h-4 rounded bg-orange-200 flex items-center justify-center text-[10px] mr-2">üí®</div>
                                <span class="text-sm text-slate-700"><strong>Aerodin√¢mica:</strong> Efeitos visuais para arrasto e sustenta√ß√£o (gliding).</span>
                            </li>
                        </ul>
                    </div>

                    <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm">
                        <h3 class="font-bold text-slate-800 mb-2">Metodologia NEAT</h3>
                        <p class="text-xs text-slate-500 mb-2">NeuroEvolution of Augmenting Topologies</p>
                        <p class="text-sm text-slate-600">Algoritmo gen√©tico que evolui a topologia da rede neural. Ideal para descobrir estrat√©gias de movimento n√£o-lineares.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 4: ROADMAP -->
        <section id="roadmap" class="tab-content max-w-6xl mx-auto">
            <header class="mb-8 flex flex-col md:flex-row md:items-center justify-between">
                <div>
                    <h2 class="text-3xl font-bold text-slate-800 mb-2">Roadmap & Organiza√ß√£o</h2>
                    <p class="text-slate-600">Prioriza√ß√£o baseada em "Gameplay Funcional Offline" primeiro.</p>
                </div>
                <div class="mt-4 md:mt-0 flex space-x-2">
                    <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold">Ativo</span>
                    <span class="px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-xs font-bold">Q1 2025</span>
                </div>
            </header>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 bg-gray-100 p-6 rounded-xl overflow-x-auto">
                
                <!-- Column: To Do -->
                <div class="bg-gray-50 rounded-lg p-4 kanban-col shadow-sm border border-gray-200">
                    <h3 class="font-bold text-slate-500 text-sm uppercase tracking-wide mb-4 flex justify-between">
                        A Fazer (Pesquisa)
                        <span class="bg-gray-200 text-gray-600 px-2 rounded-full text-xs">4</span>
                    </h3>
                    <div class="space-y-3" id="todo-col">
                        <!-- Items injected by JS -->
                    </div>
                </div>

                <!-- Column: In Progress -->
                <div class="bg-blue-50 rounded-lg p-4 kanban-col shadow-sm border border-blue-100">
                    <h3 class="font-bold text-blue-600 text-sm uppercase tracking-wide mb-4 flex justify-between">
                        Em Progresso (Core)
                        <span class="bg-blue-200 text-blue-700 px-2 rounded-full text-xs">3</span>
                    </h3>
                    <div class="space-y-3" id="progress-col">
                        <!-- Items injected by JS -->
                    </div>
                </div>

                <!-- Column: Done -->
                <div class="bg-green-50 rounded-lg p-4 kanban-col shadow-sm border border-green-100">
                    <h3 class="font-bold text-green-600 text-sm uppercase tracking-wide mb-4 flex justify-between">
                        Conclu√≠do / Planejado
                        <span class="bg-green-200 text-green-700 px-2 rounded-full text-xs">2</span>
                    </h3>
                    <div class="space-y-3" id="done-col">
                        <!-- Items injected by JS -->
                    </div>
                </div>
            </div>
            
            <div class="mt-8 p-6 bg-white border border-gray-200 rounded-xl">
                <h4 class="font-bold text-slate-800 mb-2">Pr√≥xima Etapa Cr√≠tica: Testes e Revis√£o</h4>
                <p class="text-sm text-slate-600">Revis√£o de c√≥digo da implementa√ß√£o de f√≠sica b√°sica antes de iniciar a camada de rede/multiplayer.</p>
            </div>
        </section>

    </main>

    <script>
        // --- State Management ---
        const state = {
            currentTab: 'physics',
            physics: {
                velocity: 50,
                friction: 0.1,
                drag: 0.05
            },
            wizard: {
                step: 0,
                bindings: { jump: null, fire: null, hook: null }
            }
        };

        // --- Navigation Logic ---
        function switchTab(tabId) {
            // Update State
            state.currentTab = tabId;

            // UI Updates
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');

            // Button Styles
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('bg-blue-50', 'text-blue-700');
                btn.classList.add('text-slate-600', 'hover:bg-gray-50');
            });
            const activeBtn = document.getElementById(`btn-${tabId}`);
            activeBtn.classList.remove('text-slate-600', 'hover:bg-gray-50');
            activeBtn.classList.add('bg-blue-50', 'text-blue-700');

            // Resize Charts if appearing
            if(tabId === 'physics' && physicsChart) physicsChart.resize();
            if(tabId === 'ai' && aiChart) aiChart.resize();
        }

        // --- Physics Simulation Logic (Chart.js) ---
        let physicsChart;

        function initPhysicsChart() {
            const ctx = document.getElementById('physicsChart').getContext('2d');
            
            physicsChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: Array.from({length: 20}, (_, i) => i), // Time steps 0-20
                    datasets: [
                        {
                            label: 'Velocidade (Fric√ß√£o Solo)',
                            data: [],
                            borderColor: '#3182CE', // Blue
                            backgroundColor: 'rgba(49, 130, 206, 0.1)',
                            borderWidth: 2,
                            tension: 0.3,
                            fill: true
                        },
                        {
                            label: 'Velocidade (Aerodin√¢mica/Drag)',
                            data: [],
                            borderColor: '#38B2AC', // Teal
                            borderDash: [5, 5],
                            borderWidth: 2,
                            tension: 0.3,
                            fill: false
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                        },
                        legend: {
                            position: 'bottom'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'Magnitude da Velocidade' }
                        },
                        x: {
                            title: { display: true, text: 'Ticks (Tempo)' }
                        }
                    }
                }
            });
            updatePhysicsData();
        }

        function calculateDecay(initial, factor, steps) {
            let data = [];
            let current = initial;
            for(let i=0; i<steps; i++) {
                data.push(current);
                current = current * (1 - factor);
                if(current < 0) current = 0;
            }
            return data;
        }

        function updatePhysicsData() {
            const steps = 20;
            const v0 = parseInt(document.getElementById('initVelocity').value);
            const fric = parseFloat(document.getElementById('friction').value);
            const drag = parseFloat(document.getElementById('drag').value);

            // Update Labels
            document.getElementById('valVelocity').innerText = v0;
            document.getElementById('valFriction').innerText = fric;
            document.getElementById('valDrag').innerText = drag;

            // Calculate Curves
            // Curve 1: Ground Friction
            const groundData = calculateDecay(v0, fric, steps);
            // Curve 2: Air Drag (Simplified)
            const airData = calculateDecay(v0, drag, steps);

            physicsChart.data.datasets[0].data = groundData;
            physicsChart.data.datasets[1].data = airData;
            physicsChart.update();
        }

        // Event Listeners for Sliders
        document.getElementById('initVelocity').addEventListener('input', updatePhysicsData);
        document.getElementById('friction').addEventListener('input', updatePhysicsData);
        document.getElementById('drag').addEventListener('input', updatePhysicsData);


        // --- Input Wizard Logic ---
        const wizardSteps = [
            { title: "Mover & Pular", desc: "Pressione a tecla para 'Pular'", action: "Jump" },
            { title: "Combate", desc: "Pressione a tecla para 'Atirar'", action: "Fire" },
            { title: "Movimento Avan√ßado", desc: "Pressione a tecla para 'Hook'", action: "Hook" }
        ];

        function renderWizard() {
            const step = state.wizard.step;
            const stepData = wizardSteps[step];
            const container = document.getElementById('wizardContent');
            const stepNum = document.getElementById('wizardStepNum');
            const prevBtn = document.getElementById('btnPrev');
            const nextBtn = document.getElementById('btnNext');

            if(step < wizardSteps.length) {
                stepNum.innerText = step + 1;
                container.innerHTML = `
                    <div class="text-center animate-pulse">
                        <div class="text-4xl mb-4">‚å®Ô∏è</div>
                        <h4 class="text-xl font-bold text-slate-800 mb-2">${stepData.title}</h4>
                        <p class="text-slate-500 mb-6">${stepData.desc}</p>
                        <div class="inline-block px-6 py-3 border-2 border-dashed border-blue-300 rounded-lg bg-blue-50 text-blue-800 font-mono">
                            Esperando Input...
                        </div>
                    </div>
                `;
                nextBtn.innerText = "Simular Tecla";
                nextBtn.onclick = () => {
                    // Simulate key press
                    container.innerHTML = `
                        <div class="text-center">
                            <div class="text-4xl mb-4 text-green-500">‚úì</div>
                            <h4 class="text-xl font-bold text-slate-800 mb-2">${stepData.title}</h4>
                            <p class="text-slate-500 mb-6">Tecla Atribu√≠da!</p>
                            <div class="inline-block px-6 py-3 border-2 border-solid border-green-500 rounded-lg bg-green-50 text-green-800 font-bold">
                                SPACE / CLICK
                            </div>
                        </div>
                    `;
                    nextBtn.innerText = "Pr√≥ximo";
                    nextBtn.onclick = wizardNext;
                };
            } else {
                // Done
                stepNum.innerText = "3";
                container.innerHTML = `
                    <div class="text-center">
                        <div class="text-5xl mb-4">üéâ</div>
                        <h4 class="text-xl font-bold text-slate-800 mb-2">Configura√ß√£o Completa!</h4>
                        <p class="text-slate-500">Todos os inputs foram mapeados.</p>
                    </div>
                `;
                nextBtn.innerText = "Reiniciar";
                nextBtn.onclick = () => { state.wizard.step = -1; wizardNext(); };
            }

            prevBtn.disabled = step === 0;
        }

        function wizardNext() {
            state.wizard.step++;
            if(state.wizard.step > wizardSteps.length) state.wizard.step = 0;
            renderWizard();
        }

        function wizardPrev() {
            if(state.wizard.step > 0) state.wizard.step--;
            renderWizard();
        }


        // --- AI Radar Chart ---
        let aiChart;
        function initAIChart() {
            const ctx = document.getElementById('aiChart').getContext('2d');
            aiChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Efici√™ncia de Movimento', 'Adaptabilidade', 'Custo Computacional', 'Realismo', 'Complexidade de Implementa√ß√£o'],
                    datasets: [{
                        label: 'Reinforcement Learning (RL)',
                        data: [90, 85, 80, 70, 95],
                        fill: true,
                        backgroundColor: 'rgba(237, 137, 54, 0.2)', // Orange
                        borderColor: '#ED8936',
                        pointBackgroundColor: '#ED8936',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: '#ED8936'
                    }, {
                        label: 'Algoritmos Gen√©ticos (NEAT)',
                        data: [75, 90, 60, 60, 85],
                        fill: true,
                        backgroundColor: 'rgba(49, 130, 206, 0.2)', // Blue
                        borderColor: '#3182CE',
                        pointBackgroundColor: '#3182CE',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: '#3182CE'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { display: true },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    },
                    plugins: {
                        legend: { position: 'bottom' }
                    }
                }
            });
        }

        // --- Kanban Board Data Injection ---
        function initKanban() {
            const tasks = [
                { id: 1, text: "Pesquisa: Aerodin√¢mica 2D & Vento", col: "todo", tag: "F√≠sica" },
                { id: 2, text: "Game Feel: Design de Som & Feedback", col: "todo", tag: "UX" },
                { id: 3, text: "IA: Algoritmos Gen√©ticos (NEAT)", col: "todo", tag: "IA" },
                { id: 4, text: "Testes & Revis√£o de C√≥digo", col: "todo", tag: "QA" },
                
                { id: 5, text: "An√°lise: CCharacter & CGameWorld", col: "progress", tag: "Core" },
                { id: 6, text: "Matem√°tica: Grappling Hook", col: "progress", tag: "F√≠sica" },
                { id: 7, text: "Sistemas: Input Mapping Wizard", col: "progress", tag: "Sistema" },
                
                { id: 8, text: "Organiza√ß√£o Estrutural do Projeto", col: "done", tag: "Gest√£o" },
                { id: 9, text: "Defini√ß√£o de Gameplay Offline", col: "done", tag: "Design" },
            ];

            const cols = {
                todo: document.getElementById('todo-col'),
                progress: document.getElementById('progress-col'),
                done: document.getElementById('done-col')
            };

            const tagColors = {
                "F√≠sica": "bg-indigo-100 text-indigo-700",
                "UX": "bg-pink-100 text-pink-700",
                "IA": "bg-purple-100 text-purple-700",
                "QA": "bg-red-100 text-red-700",
                "Core": "bg-blue-100 text-blue-700",
                "Sistema": "bg-cyan-100 text-cyan-700",
                "Gest√£o": "bg-gray-200 text-gray-700",
                "Design": "bg-emerald-100 text-emerald-700"
            };

            tasks.forEach(task => {
                const el = document.createElement('div');
                el.className = "bg-white p-3 rounded border border-gray-200 shadow-sm cursor-pointer hover:shadow-md transition-shadow";
                el.innerHTML = `
                    <p class="text-sm text-slate-800 mb-2 font-medium leading-snug">${task.text}</p>
                    <span class="inline-block px-2 py-0.5 rounded text-[10px] font-bold ${tagColors[task.tag] || 'bg-gray-100'}">${task.tag}</span>
                `;
                if(cols[task.col]) cols[task.col].appendChild(el);
            });
        }

        // --- Initialization ---
        window.addEventListener('load', () => {
            initPhysicsChart();
            initAIChart();
            renderWizard();
            initKanban();
        });

    </script>
</body>
</html>